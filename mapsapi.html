<!DOCTYPE html>
<html>
<head>
  <title>Parks Locator</title>
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
    #coords {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 8px;
      border-radius: 4px;
      font-family: Arial, sans-serif;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      z-index: 5;
    }
  </style>
</head>
<body>
  <div id="coords">Click on the map to get coordinates</div>
  <div id="map"></div>

  <script>
    let map;
    let service;
    let parkOverlays = [];

    function initMap() {
      const center = { lat: -33.8688, lng: 151.2093 }; // Default center

      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: center,
      });

      // Click listener to show coordinates and nearby parks
      map.addListener("click", (event) => {
        const lat = event.latLng.lat();
        const lng = event.latLng.lng();
        document.getElementById("coords").innerText = `Latitude: ${lat}, Longitude: ${lng}`;

        // Clear previous overlays
        parkOverlays.forEach(circle => circle.setMap(null));
        parkOverlays = [];

        // Search for nearby parks around click
        const request = {
          location: { lat, lng },
          radius: 5000, // 5 km
          type: ['park']
        };

        service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, (results, status) => {
          if (status === google.maps.places.PlacesServiceStatus.OK) {
            // Highlight parks
            results.forEach(place => {
              const circle = new google.maps.Circle({
                strokeColor: "#4CAF50",
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: "#4CAF50",
                fillOpacity: 0.35,
                map: map,
                center: place.geometry.location,
                radius: 200
              });
              parkOverlays.push(circle);
            });

            // Update count in coords div
            document.getElementById("coords").innerText += `\nNearby Parks: ${results.length}`;
          } else {
            document.getElementById("coords").innerText += `\nNearby Parks: 0`;
          }
        });
      });
    }
  </script>

  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBI5q7wUDtGPlpRTC66tw4Om1V67Yu-h2c&libraries=places&callback=initMap"
    async
    defer
  ></script>
</body>
</html>
